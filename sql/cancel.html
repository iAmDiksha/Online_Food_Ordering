<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #cancel-order-button {
    background-color: rgb(83, 113, 148);
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
}
#cancel-order-button:hover {
    background-color: darkred;
    cursor: pointer;
}
#reason-form {
    background-color: #f1f1f1;
    padding: 20px;
    border-radius: 5px;
}
#close-form-button {
    background-color: gray;
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    float: right;
    cursor: pointer;
}
#close-form-button:hover {
    background-color: darkgray;
}

    </style>
</head>
<!-- 
<?php
// Connect to the database
$servername = "localhost";
$username = "your_username";
$password = "your_password";
$dbname = "shop";

$conn = new mysqli($servername, $username, $password, $dbname);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
} 

if(isset($_POST['submit'])){
    // Get the order ID and reason for cancellation
    $order_id = $_POST['order_id'];
    $reason = $_POST['reason'];

    // Check if the order ID and reason are not empty
    if(!empty($order_id) && !empty($reason)){
        // Prepare the SQL statement
        $sql = "UPDATE orders SET status='cancelled', reason=? WHERE id=?";
        $stmt = $conn->prepare($sql);
        $stmt->bind_param("si", $reason, $order_id);
        // Execute the statement
        if($stmt->execute()){
            echo "Order cancelled successfully.";
        }else{
            echo "Error: " . $stmt->error;
        }
        $stmt->close();
    }else{
        echo "Order ID and reason for cancellation cannot be empty.";
    }
}

$conn->close();
?> -->

<body>
    <button id="cancel-order-button">Cancel Order</button>
<div id="reason-form" style="display:none;">
  <form action="cancel_order.php" method="post">
    <label for="reason">Reason for Cancellation:</label>
    <textarea id="reason" name="reason"></textarea>
    <input type="submit" value="Submit">
    <button id="close-form-button">Close</button>
  </form>
</div>
<script>
    var cancelOrderButton = document.getElementById("cancel-order-button");
var reasonForm = document.getElementById("reason-form");
var closeFormButton = document.getElementById("close-form-button");
var orderIdInput = document.getElementById("order_id");

cancelOrderButton.addEventListener("click", function() {
    reasonForm.style.display = "block";
});

closeFormButton.addEventListener("click", function() {
    reasonForm.style.display = "none";
});

reasonForm.addEventListener("submit", function(event) {
    event.preventDefault();
    var orderId = orderIdInput.value;
    var reason = document.getElementById("reason").value;
    // validate the orderId and reason
    if(!orderId || !reason) {
        alert("Order ID and reason for cancellation cannot be empty.");
        return;
    }
    // submit the form
    reasonForm.submit();
});

</script>
</body>
</html>